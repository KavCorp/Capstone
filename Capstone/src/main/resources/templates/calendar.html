<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">
	<!--/*/ <th:block th:include="fragments/headerinc :: head"></th:block> /*/-->
	<link href='/css/fullcalendar.css' rel='stylesheet' />
	<link href='/css/fullcalendar.print.css' rel='stylesheet' media='print' />
	<script src='/js/lib/moment.min.js'></script>
	<script src='/js/fullcalendar.min.js'></script>
<script th:inline="javascript">
/*<![CDATA[*/
	$(document).ready(function() {

		var json = /*[[${eventsJson}]]*/
			var parsed = JSON.parse(json, function(k, v) {
				if (k==="rsvp"&& v === true)
					this.color ="red";
			    if (k === "starttime") 
			        this.start = v;
			    else if (k === "eventId")
			        this.id = v, this.url = "/event/"+v;
			    else if (k === "name")
			        this.title = v;
			    else if (k === "endtime")
			        this.end = v;
			    else
			        return v;
			});
		
		console.log(JSON.parse(json)[0])
		var eventArray = [];
		
		$('#calendar').fullCalendar({
			timezone: 'local',
			editable: false,
			eventLimit: true, // allow "more" link when too many events
			events: parsed
		});
	});
	/*]]>*/
</script>
<style>

	body {
		margin: 40px 10px;
		padding: 0;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		font-size: 14px;
	}

	#calendar {
		position: relative;
		right: 0px;
		max-width: 80%;
		margin: 0 auto;
	}

</style>
</head>
<body>
	<div class="container">
	<!--/*/ <th:block th:include="fragments/header :: header"></th:block> /*/-->
	<section class="row">
    <article class="span9">
        <div id='calendar'></div>
    </article>
     
    <aside class="span3">
        <!--/*/ <th:block th:include="fragments/eventList :: eventList"></th:block> /*/-->
    </aside>
</section>
	
		
		
	</div>
</body>
</html>